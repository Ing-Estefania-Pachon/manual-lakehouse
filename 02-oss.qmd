# Gesti칩n de Archivos en OSS

El **Object Storage Service (OSS)** de Alibaba Cloud es la base de nuestra capa **Bronze**. En este cap칤tulo, aprender치s a gestionar los archivos de forma estandarizada y segura.

## Flujo de Datos en el Lakehouse

Para contextualizar el rol de OSS, observemos c칩mo transitan los datos a trav칠s de las capas del proyecto:

```{mermaid}
graph TD
    A[Fuentes de Datos] -->|Carga/ossutil| B("游볠 Capa Bronze (OSS)")
    B -->|Procesamiento| C("游볟 Capa Silver (MaxCompute)")
    C -->|Refinamiento| D("游볞 Capa Gold (MaxCompute)")
    D -->|Visualizaci칩n| E[Quick BI / DataV]

    style B fill:#cd7f32,stroke:#333,stroke-width:2px,color:#fff
    style C fill:#c0c0c0,stroke:#333,stroke-width:2px,color:#000
    style D fill:#ffd700,stroke:#333,stroke-width:2px,color:#000
```

## Navegaci칩n por la Consola

Para gestionar los datos manualmente:

1.  Inicia sesi칩n en la consola de **Alibaba Cloud**.
2.  En el men칰 de productos, busca y selecciona **Object Storage Service**.
3.  En el panel izquierdo, haz clic en **Bucket List**.
4.  Selecciona el bucket asignado a tu proyecto (ej: `ungrd-lakehouse-bronze`).
5.  Usa la pesta침a **Files** para navegar por las carpetas, subir o descargar archivos.

## Est치ndares de Naming: Regla UNGRD

Para garantizar la trazabilidad y evitar colisiones de datos, **todos** los archivos cargados deben seguir esta estructura:

`[PROYECTO]_[ZONA]_[FECHA]_[VERSION].[EXT]`

**Ejemplos:**
- `SUE_MOCOA_20231025_V1.csv`
- `SAT_VIGIA_20240112_V2.json`

> [!IMPORTANT]
> No uses espacios, tildes ni caracteres especiales en los nombres. Usa siempre guion bajo (`_`) como separador.

## Gu칤a de Carga de Datos

### Carga v칤a Consola Web (Paso a Paso)

Este m칠todo es ideal para archivos individuales o vol칰menes peque침os de datos:

1.  **Ingreso al Bucket:** Navega hasta tu bucket objetivo siguiendo los pasos de la secci칩n 2.1.
2.  **Preparaci칩n de Carpeta:** Entra en la carpeta de destino donde deseas que repose el dato (ej: `proyectos/sue/bronze/`).
3.  **Iniciar Carga:** Haz clic en el bot칩n azul **Upload** situado en la parte superior derecha.
4.  **Selecci칩n de Archivos:** 
    - Haz clic en **Select Files** para abrir el explorador de tu equipo.
    - O simplemente arrastra y suelta los archivos directamente en el recuadro gris.
5.  **Configuraci칩n de Carga:** 
    - **Upload To:** Verifica que la ruta de destino sea la correcta.
    - **File ACL:** D칠jalo en **Inherited from Bucket** (esto asegura que herede los permisos de seguridad de la UNGRD).
    - **Storage Class:** Aseg칰rate de que est칠 en **Standard** para datos que van a ser procesados de inmediato.
6.  **Finalizar:** Haz clic en el bot칩n **Upload** al final del panel lateral. Podr치s seguir el progreso en la barra de tareas inferior.

### Carga v칤a `ossutil` (Vol칰menes masivos/Automatizaci칩n)
Para usuarios avanzados e ingenieros, recomendamos usar la herramienta de l칤nea de comandos `ossutil`.

**Comando b치sico de subida:**
```bash
./ossutil64 cp ./mi_archivo_local.csv oss://ungrd-lakehouse-bronze/proyectos/sue/
```

## Versionamiento y Recuperaci칩n

El Lakehouse tiene activado el **Bucket Versioning**. Esto significa que si sobrescribes un archivo con el mismo nombre, el sistema guarda una copia de la versi칩n anterior.

> [!WARNING]
> **Recuperaci칩n de Archivos Borrados:**
> Si borras un archivo accidentalmente, este no desaparece de inmediato. El sistema crea un "Delete Marker". Para recuperarlo, debes activar la opci칩n **Show Deleted Objects**, seleccionar la versi칩n anterior al borrado y hacer clic en **Restore**.

## Ciclo de Vida: Optimizaci칩n de Costos

Los datos de desastres antiguos que ya no se consultan frecuentemente deben moverse a capas de almacenamiento m치s baratas.

1.  **Standard:** Acceso frecuente, mayor costo.
2.  **IA (Infrequent Access):** Acceso mensual, menor costo.
3.  **Cold Archive:** Para datos hist칩ricos (de hace 5+ a침os). Los costos son m칤nimos, pero la recuperaci칩n puede tardar minutos u horas.

Configura reglas de **Lifecycle** en la pesta침a **Basic Settings** para automatizar este movimiento y optimizar el presupuesto de la UNGRD.
